# 诊断页面与智能推荐功能开发计划

根据您的需求，我将创建诊断页面并集成题型分析与智能推荐功能。

## 1. 创建诊断页面 (`src/app/diagnostics/page.tsx`)
我们将新建此页面，核心逻辑如下：

### 数据获取与处理
- **联表查询**: 修改数据获取逻辑，在查询 `essays` 时关联 `questions` 表，获取 `topic` (话题) 和 `question_type` (题型) 字段。
- **数据聚合**:
  - **题型分布**: 按 `question_type` (如 "Agree/Disagree", "Advantages/Disadvantages") 分组计算平均分。
  - **话题分析**: 按 `topic` (如 "Environment", "Education") 分组计算平均分，识别“薄弱话题”。

### 新增 UI 模块
- **题型表现分析**: 使用图表或进度条展示用户在不同题型上的平均分对比，直观呈现优势与短板。
- **智能推荐卡片**:
  - 当识别出薄弱话题（如“Environment”）后，自动从 `questions` 表中查询 2 道该话题下的相关题目。
  - 展示题目卡片，包含题目内容、话题标签。
  - **Start Practice 按钮**: 点击直接跳转到 `/workshop?question_id={id}` 开始练习。

## 2. 更新导航配置

### 国际化文件 (`src/lib/i18n/translations.ts`)
- 在 `sidebar` 节点下新增 `diagnostics` 字段：
  - EN: "Diagnostics"
  - ZH: "诊断分析"

### 侧边栏组件 (`src/components/Sidebar.tsx`)
- 引入图标 (使用 `BarChart` 或 `Activity`)。
- 添加指向 `/diagnostics` 的导航入口。

## 3. 执行步骤
1.  创建 `src/app/diagnostics/page.tsx` 并实现完整逻辑。
2.  修改 `src/lib/i18n/translations.ts` 添加翻译。
3.  修改 `src/components/Sidebar.tsx` 添加侧边栏链接。